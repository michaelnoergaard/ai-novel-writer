# AI Short Story Writer - Version 1.2

An autonomous AI-powered short story generator using PydanticAI agents with enhanced tools and config-driven interface.

## Features

- **Autonomous Story Generation**: Complete short stories (1,000-7,500 words) generated by AI
- **Multiple Genres**: Literary, Mystery, Science Fiction, Fantasy, Romance
- **Flexible Length**: Flash fiction (under 1,000 words) or traditional short stories
- **Custom Themes & Settings**: Specify optional themes and settings for your story
- **Professional Quality**: Stories crafted with proper structure, character development, and narrative flow
- **Professional PDF Export**: Theme-based PDF formatting with genre-appropriate styling and typography

## Installation

1. **Clone the repository**:
   ```bash
   git clone <repository-url>
   cd ai_novel_writer
   ```

2. **Install uv** (if not already installed):
   ```bash
   curl -LsSf https://astral.sh/uv/install.sh | sh
   ```

3. **Set up environment variables**:
   ```bash
   cp .env.example .env
   # Edit .env and add your OpenAI API key
   ```

4. **Install dependencies with uv**:
   ```bash
   uv sync
   ```

   *Or using traditional pip:*
   ```bash
   pip install -r requirements.txt
   ```

## Usage

### Basic Generation

Generate a basic literary short story:
```bash
uv run main.py generate
```

### With Custom Parameters

Generate a mystery story with specific word count:
```bash
uv run main.py generate -g mystery -w 2500
```

Generate flash fiction with theme:
```bash
uv run main.py generate -l flash -w 750 -t "redemption"
```

Generate with setting and theme:
```bash
uv run main.py generate -g fantasy -s "enchanted forest" -t "courage" -w 4000
```

### PDF Export

Export to professional PDF with theme-based styling:
```bash
uv run main.py generate -g mystery -w 2000 -p mystery_story.pdf
```

Generate both text and PDF versions:
```bash
uv run main.py generate -g literary -t "redemption" -o story.txt -p story.pdf
```

Flash fiction with verbose output and PDF:
```bash
uv run main.py generate -l flash -w 750 -v -p flash_story.pdf
```

### Command Line Options

- `-g, --genre`: Story genre (literary, mystery, science_fiction, fantasy, romance)
- `-l, --length`: Length category (flash, short)
- `-w, --words`: Target word count (100-7500)
- `-t, --theme`: Optional theme for the story
- `-s, --setting`: Optional setting for the story
- `-o, --output`: Output file path (optional, defaults to stdout)
- `-p, --pdf`: Export to PDF file path (e.g., story.pdf)
- `-v, --verbose`: Verbose output with generation details

### Other Commands

Show information about the generator:
```bash
uv run main.py info
```

View example commands:
```bash
uv run main.py examples
```

## Supported Genres

- **Literary**: Character-driven stories with deep themes and psychological insight
- **Mystery**: Stories with puzzles, clues, and satisfying resolutions
- **Science Fiction**: Speculative fiction exploring technology and its impact
- **Fantasy**: Stories with magical or supernatural elements
- **Romance**: Emotional stories focused on relationships and connections

## Length Categories

- **Flash Fiction**: 100-1,000 words - Single moment or revelation
- **Short Story**: 1,000-7,500 words - Full narrative arc with character development

## PDF Themes and Styling

Each genre has a professionally designed PDF theme:

- **Literary**: Elegant serif fonts, warm colors, decorative elements, drop caps
- **Mystery**: Dark color scheme, bold typography, minimal decoration
- **Science Fiction**: Modern sans-serif fonts, blue/cyan accent colors, clean layout
- **Fantasy**: Rich purples and gold, serif fonts, decorative elements
- **Romance**: Rose tones, italic titles, elegant spacing and typography

All PDFs include:
- Professional title page with metadata
- Genre-appropriate typography and spacing
- Story information page
- Proper paragraph formatting and line spacing

## Architecture

Version 1 uses a simple single-agent architecture:

- **SimpleStoryAgent**: Main AI agent that generates complete stories using OpenAI
- **PDF Formatter**: Professional PDF export with theme-based styling
- **Story Models**: Pydantic models for type-safe data handling
- **Configuration**: Environment-based configuration with error handling
- **CLI Interface**: Click-based command-line interface

## Configuration

Configuration is handled via a `.env` file in the project root. Copy `.env.example` to `.env` and customize:

```bash
cp .env.example .env
```

Available configuration options:

- `OPENAI_API_KEY`: **Required** - Your OpenAI API key
- `AI_WRITER_MODEL`: Optional - Model name (default: "openai:gpt-4o")
- `AI_WRITER_TEMPERATURE`: Optional - Generation temperature (default: 0.7)
- `AI_WRITER_TIMEOUT`: Optional - Timeout in seconds (default: 120)
- `AI_WRITER_MAX_RETRIES`: Optional - Max retry attempts (default: 3)
- `AI_WRITER_LOG_LEVEL`: Optional - Logging level (default: "INFO")
- `AI_WRITER_ENCODING`: Optional - Output encoding (default: "utf-8")

Environment variables can also be set traditionally if preferred.

## Error Handling

The system includes comprehensive error handling for:

- Missing environment variables
- Invalid input parameters
- Agent execution failures
- File I/O errors
- Network timeouts

## Logging

Logs are written to `ai_story_writer.log` and can be controlled via the `AI_WRITER_LOG_LEVEL` environment variable or the `-v` flag.

## Project Structure

```
ai-novel-writer/
├── main.py                    # Main CLI interface
├── config.toml               # Configuration file
├── src/ai_story_writer/      # Main package
│   ├── agents/              # AI agents
│   │   ├── simple_story_agent.py      # V1.1 basic agent
│   │   ├── enhanced_story_agent.py    # V1.2 enhanced agent
│   │   └── enhanced_dependencies.py   # V1.2 dependencies
│   ├── models/              # Data models
│   │   ├── basic_models.py            # Core models
│   │   └── enhanced_models.py         # V1.2 enhanced models
│   └── utils/               # Utilities
│       ├── config.py                  # Configuration
│       └── pdf_formatter.py           # PDF export
├── docs/                    # Documentation
│   ├── specs/               # Version specifications
│   └── plans/               # Implementation plans
├── examples/                # Example files and outputs
└── tests/                   # Test files
```

## Requirements

- Python 3.11+
- OpenAI API key
- Internet connection for LLM access

## Future Versions

This is Version 1.2 of a planned 7-version development roadmap:

- **Version 1.0**: Single agent with direct OpenAI API
- **Version 1.1**: PydanticAI agent framework implementation
- **Version 1.2**: Enhanced tools and structured output models (current)
- **Version 1.5**: Advanced quality assessment and multi-pass generation
- **Version 2.0**: Agent delegation with master/worker pattern
- **Version 3.0**: Multi-agent coordination with specialized agents
- **Version 4.0**: Graph-based workflow with advanced features

## License

[License information]

## Contributing

[Contributing guidelines]